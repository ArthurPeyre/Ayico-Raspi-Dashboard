version: "3.8"

services:
  raspi-api:
    build: ./raspi-api
    volumes:
      - /sys/class/thermal/thermal_zone0/temp:/sys/class/thermal/thermal_zone0/temp:ro
      - /proc:/proc:ro
      - /:/host:ro
      - /var/run/docker.sock:/var/run/docker.sock
    restart: unless-stopped

  raspi-dashboard:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./raspi-dashboard/default.conf:/etc/nginx/conf.d/default.conf:ro
      - ./raspi-dashboard:/usr/share/nginx/html:ro
    depends_on:
      - raspi-api
    restart: unless-stopped
